flowchart LR
    %% =====================================
    %% GLOBAL ENTRY: 공용 진입 지점
    %% =====================================
    A0[Landing / Login 화면] --> S0[학생으로 로그인]
    A0 --> P0[학부모로 로그인]
    A0 --> C0[컨설턴트로 로그인]

    %% =====================================
    %% STUDENT FLOW
    %% =====================================
    subgraph STUDENT[Student Flow]
        direction TB

        %% 온보딩 & 홈
        S0 --> S1[학생 온보딩 / 프로필 설정\n- 학교/학년\n- 희망 진로/계열\n- 간단 성향 체크]
        S1 --> S2[학생 홈 대시보드\n- 이번 주 추천 액션\n- 입력 현황\n- 추천 학교 요약]

        %% 데이터 입력
        S2 --> S3[데이터 입력 화면\n- 성적(지필/수행)\n- 활동(세특/동아리/창체)\n- 독서 기록]
        S3 --> S3a[저장 및 검증\n- 점수 범위 체크\n- 필수 항목 확인]
        S3a --> S2

        %% 진단 & 액션 플랜
        S2 --> S4[고입 진단 실행\n- FIT / CHALLENGE / UNLIKELY\n- 학교별 매칭 근거]
        S4 --> S5[AI 액션 플랜 생성\n- 3개월 계획\n- 주간 할 일\n- 과목별 목표]
        S5 --> S6[목표 학교 준비 가이드\n- 전형 구조\n- 요구 역량\n- 준비 전략]

        %% Plan → 실행
        S5 --> S7[할 일(Task) 목록\n- 체크리스트 형태]
        S7 --> S8[Task 완료 체크\n- DONE / SKIPPED 표시]
        S8 --> S9[학생 타임라인 업데이트\n- 점수/활동/진단/Task 완료 이력]
    end

    %% =====================================
    %% PARENT FLOW
    %% =====================================
    subgraph PARENT[Parent Flow]
        direction TB

        P0 --> P1[학부모 온보딩\n- 고입 구조 요약\n- 서비스 기능 설명]
        P1 --> P2[자녀 계정 연결\n- 초대 코드/검색\n- 가족 관계 설정]

        P2 --> P3[학부모 대시보드\n- 3줄 스냅샷\n- 자녀별 요약\n- 중요 알림]
        P3 --> P4[자녀 활동 검토/승인\n- 학생 입력 내용 확인\n- 생기부 문장 미리보기\n- 수정/승인]
        P3 --> P5[진단 결과 열람\n- 추천 학교\n- FIT/CHALLENGE/UNLIKELY\n- 강점/보완점]
        P3 --> P6[입시 일정 캘린더\n- 관심 학교 일정\n- 원서/면접/발표/설명회]

        P5 --> P7[전략 이해\n- 왜 이 학교가 맞는지\n- 무엇을 더 준비해야 하는지]
        P6 --> P8[일정 관리\n- 누락 방지\n- 가족 일정과 조율]

        P3 --> P9[PDF 리포트 다운로드\n- 자녀 현황 요약\n- 추천 전략\n- 향후 계획]

        P5 --> P10[프리미엄/상담 필요성 인지\n- 불안 요소 파악\n- 전문가 도움 필요 판단]
    end

    %% =====================================
    %% CONSULTANT FLOW
    %% =====================================
    subgraph CONSULTANT[Consultant Flow]
        direction TB

        C0 --> C1[컨설턴트 대시보드\n- 상담 요청 목록\n- 학생 리스트]
        C1 --> C2[학생 현황 요약 보기\n- 성적/활동/독서\n- 진단 결과\n- AI 분석 요약]
        C2 --> C3[상담 준비 완료\n- 핵심 이슈 파악\n- 필요 자료 확인]

        C3 --> C4[상담 진행\n- 온라인/오프라인/전화 등\n- 주요 논의 내용 기록]
        C4 --> C5[상담 리포트 작성 화면\n- AI 초안 기반\n- 컨설턴트가 수정/보완]
        C5 --> C6[리포트 확정 및 저장\n- 학생/학부모 공유\n- 향후 상담 참고용]
    end

    %% =====================================
    %% CROSS LINKS (역할 간 연결)
    %% =====================================

    %% 학생 온보딩 → 학부모 초대
    S1 -. 자녀 초대 코드 전송 .-> P2

    %% 학생 데이터/진단 → 학부모 대시보드
    S3 -->|학생 데이터 반영| P3
    S4 -->|진단 결과 공유| P5
    S7 -->|실행 현황 반영| P3

    %% 학부모 → 컨설턴트 상담 요청
    P10 -->|상담 예약| C1

    %% 컨설턴트 리포트 → 학부모/학생
    C6 -->|리포트 공유| P9
    C6 -->|핵심 요약 반영| S2
