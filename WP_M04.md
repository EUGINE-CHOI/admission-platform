# 🧩 M4 — 고입 진단 엔진 (Diagnosis Core)

> **목적**: 학생 데이터 × 전형 요건을 기반으로 FIT / CHALLENGE / UNLIKELY 평가 제공

---

## 📦 산출물
- 진단 계산 로직
- 학교 적합도 Top3 추천
- 진단 리포트 저장/조회

---

## WP4.0 — 목표 학교 설정 (신규)

**기능**: 진단받을 학교를 학생이 직접 선택

**세부 기능**:
- 목표 학교 추가/삭제
- 우선순위 설정 (1순위, 2순위...)
- 목표 학교 목록 조회

**완료 조건**:
→ 학생이 원하는 학교를 목표로 설정 가능

---

## WP4.1 — 내신 기반 단순 진단 로직 V1

**기능**: FIT/CHALLENGE/UNLIKELY 계산

**입력 데이터**:
- 학생의 승인된 성적 (평균 등급)
- 목표 학교의 커트라인

**판정 기준**:
| Level | 기준 |
|-------|------|
| FIT | 평균 등급 ≤ 커트라인 + 0.5 |
| CHALLENGE | 커트라인 + 0.5 < 평균 등급 ≤ 커트라인 + 1.5 |
| UNLIKELY | 평균 등급 > 커트라인 + 1.5 |

**완료 조건**:
→ 학생 첫 진단 결과 출력

---

## WP4.2 — 활동 기반 보조 점수 반영

**기능**: 활동 수/유형/적합성 기반 점수 계산

**점수 비율**:
| 항목 | 비율 |
|------|:----:|
| 내신 | 60% |
| 활동 | 20% |
| 출결 | 10% |
| 봉사 | 10% |

**완료 조건**:
→ 진단 결과 정확도 증가

---

## WP4.3 — 추천 학교 Top3 출력

**기능**: 학교 DB와 전형요건 비교 후 적합도 순 추천

**로직**:
1. 모든 게시된 학교에 대해 적합도 계산
2. 점수 높은 순으로 정렬
3. Top 3 반환 (예상 판정 + 추천 이유 포함)

**완료 조건**:
→ 사용자가 "추천 학교 카드"를 볼 수 있음

---

## WP4.4 — 진단 결과 조회 및 히스토리

**기능**: 점수, 이유 분석, 항목별 부족점 조회

**세부 기능**:
- 최근 진단 결과 조회
- 진단 히스토리 목록
- 학교별 진단 결과 필터링
- 학부모 자녀 진단 조회

**완료 조건**:
→ 학생/부모가 진단 보고서를 열람 가능

---

## 📊 데이터 흐름

```
[M2 학생 데이터]     [M3 학교 데이터]
      │                    │
      ▼                    ▼
┌─────────────────────────────────────┐
│         목표 학교 설정 (WP4.0)       │
└─────────────────────────────────────┘
                  │
                  ▼
┌─────────────────────────────────────┐
│     내신 기반 진단 (WP4.1)          │
│     + 활동/출결/봉사 (WP4.2)        │
└─────────────────────────────────────┘
                  │
      ┌───────────┴───────────┐
      ▼                       ▼
┌─────────────┐       ┌─────────────┐
│ 목표학교    │       │ 추천 Top3   │
│ 진단 결과   │       │ (WP4.3)     │
└─────────────┘       └─────────────┘
                  │
                  ▼
┌─────────────────────────────────────┐
│     진단 결과 저장/조회 (WP4.4)      │
│     학부모 열람 가능                 │
└─────────────────────────────────────┘
```

---

## 📝 관련 시나리오 문서

→ `SCENARIO_M4_Diagnosis.md` 참조

---

## ⚠️ 최소 요구사항

| 항목 | 조건 |
|------|------|
| 진단 실행 | 승인된 성적 3과목 이상 |
| 목표 학교 진단 | 목표 학교 1개 이상 설정 |
| 추천 기능 | 게시된 학교 1개 이상 |
