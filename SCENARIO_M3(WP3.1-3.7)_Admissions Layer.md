✅ WP3.1 — 크롤러 기본 스크립트(한 학교 수집 성공)

Python + Playwright 기반으로 실제 HTML을 파싱하고 JSON 구조로 전환하는 최소 기능

Scenario WP3.1-1: 단일 학교 정보 크롤링 성공

Given: 학교 공식 홈페이지 URL이 유효하고 페이지 구조가 예상과 동일하다.

When: 크롤러 스크립트를 실행한다.

Then: 학교명, 주소, 전화번호 등 기본 정보가 JSON으로 파싱되어 로컬/DB에 저장된다.

선행: 없음

Scenario WP3.1-2: 페이지 구조 변경으로 인해 파싱 실패

Given: 해당 학교 홈페이지 HTML 구조가 미세하게 변경되었다.

When: 크롤러가 기존 CSS Selector 기준으로 정보를 추출하려 한다.

Then: 0개 필드 혹은 파싱 실패 오류가 발생하고 “스크래핑 실패” 로그가 기록된다.

선행: 없음

Scenario WP3.1-3: 네트워크 오류로 크롤링 실패

Given: 학교 홈페이지 서버가 일시적으로 다운되었다.

When: 크롤러가 HTTP 요청을 보낸다.

Then: Timeout 예외 발생, 재시도 로직 작동 또는 실패 로그 저장.

선행: 없음

✅ WP3.2 — 전형/일정 구조 설계 + DB 반영
Scenario WP3.2-1: 새로운 전형 레코드 생성 성공

Given: 유효한 학교 ID가 존재한다.

When: API를 통해 해당 학교의 전형 요소(내신 %, 면접 여부, 제출 서류)를 등록 요청한다.

Then: admissions 테이블에 새로운 전형 버전이 “draft” 상태로 저장된다.

선행: WP3.1-1

Scenario WP3.2-2: 연도별 전형 버전 중복 시 저장 실패

Given: admissions 테이블에 이미 2026년도 전형 버전이 존재한다.

When: 동일 연도·버전으로 새로운 전형 저장을 시도한다.

Then: 409 Conflict와 “이미 존재하는 전형 버전입니다” 메시지가 반환된다.

선행: WP3.2-1

Scenario WP3.2-3: 일정 데이터 저장 성공

Given: 전형 데이터가 draft 상태로 등록되어 있다.

When: 원서접수일/면접일/발표일 등의 일정 데이터를 추가로 입력한다.

Then: schedules 테이블에 해당 일정이 정상적으로 저장된다.

선행: WP3.2-1

🛠 WP3.3 — 관리자(Admin) 승인 화면
Scenario WP3.3-1: Admin이 수집된 전형 데이터를 승인

Given: admissions가 draft 상태로 저장되어 있다.

When: 관리자가 “승인(Publish)” 버튼을 클릭한다.

Then: 해당 전형의 status가 published로 변경되고 학생/부모 화면에서 조회 가능해진다.

선행: WP3.2-1

Scenario WP3.3-2: Admin이 데이터 오류를 수정한 후 승인

Given: draft 상태 전형 데이터 중 일부 항목에 오타가 있다.

When: 관리자가 수정 후 승인 버튼을 클릭한다.

Then: 수정된 값이 반영된 published 상태 레코드가 생성된다.

선행: WP3.3-1 (수정→다시 승인)

Scenario WP3.3-3: 승인되지 않은 전형 조회 시 접근 차단

Given: 특정 학교의 전형 데이터가 여전히 draft 상태다.

When: 학부모가 공개 API로 학교 전형 정보를 조회한다.

Then: API는 404 또는 “아직 공개되지 않은 전형 정보입니다” 응답을 반환한다.

선행: 없음

🖥 WP3.4 — 학교 상세 페이지 (FE)
Scenario WP3.4-1: 게시된 전형 정보 조회 성공

Given: admissions.status = published 상태이다.

When: 학생이 “학교 상세 페이지” 버튼을 클릭한다.

Then: 학교명, 전형 요소, 일정, 특징 등이 정상적으로 화면에 출력된다.

선행: WP3.3-1

Scenario WP3.4-2: 전형 데이터가 없는 학교 조회 시 빈 상태 표시

Given: 특정 신규 학교는 전형 정보가 아직 등록되지 않았다.

When: 학생 또는 학부모가 학교 상세를 조회한다.

Then: “전형 정보가 아직 등록되지 않았습니다”라는 안내가 표시된다.

선행: 없음

Scenario WP3.4-3: 잘못된 학교 ID로 조회 시 오류 반환

Given: DB에 존재하지 않는 school_id로 API 요청이 들어온다.

When: FE에서 학교 상세 데이터를 요청한다.

Then: 404와 "학교 정보를 찾을 수 없습니다" 메시지가 반환된다.

선행: 없음

🔗 WP3.5 — 학교 홈페이지 바로가기 링크

Scenario WP3.5-1: 목표 학교 목록에서 홈페이지 링크 표시

Given: 학생이 목표 학교를 등록했고, 해당 학교에 website URL이 저장되어 있다.

When: 진단 페이지의 "목표 학교" 섹션을 조회한다.

Then: 학교명 옆에 외부 링크 아이콘(🔗)이 표시된다.

선행: WP3.2-1, WP4.1

Scenario WP3.5-2: 홈페이지 링크 클릭 시 새 탭에서 열림

Given: 목표 학교 목록에 홈페이지 링크 아이콘이 표시되어 있다.

When: 학생이 링크 아이콘을 클릭한다.

Then: 새 브라우저 탭에서 해당 학교의 공식 홈페이지가 열린다.

선행: WP3.5-1

Scenario WP3.5-3: 홈페이지 URL이 없는 학교의 경우 링크 미표시

Given: 특정 학교의 website 필드가 null 또는 빈 문자열이다.

When: 해당 학교가 목표 학교 목록에 표시된다.

Then: 링크 아이콘이 표시되지 않고 학교명만 표시된다.

선행: 없음

Scenario WP3.5-4: 크롤링 시 학교 홈페이지 URL 자동 수집

Given: 크롤러가 학교 정보를 수집할 때 홈페이지 URL도 함께 파싱한다.

When: 관리자가 크롤링을 실행한다.

Then: schools 테이블의 website 필드에 학교 홈페이지 URL이 저장된다.

선행: WP3.1-1

---

📊 WP3.6 — 전국 학교 데이터 확장

Scenario WP3.6-1: 전국 중학교 데이터 검색

Given: 341개 전국 중학교 데이터가 데이터베이스에 저장되어 있다.

When: 사용자가 회원가입 시 중학교명을 검색한다.

Then: 해당 지역의 중학교 목록이 자동완성으로 표시된다.

선행: 없음

Scenario WP3.6-2: 지역별 중학교 필터링

Given: 사용자가 특정 지역(예: 경기)을 선택했다.

When: 중학교 검색을 실행한다.

Then: 해당 지역의 중학교만 검색 결과에 표시된다.

선행: WP3.6-1

Scenario WP3.6-3: 전국 특목고/자사고 데이터 조회

Given: 92개 전국 특목고/자사고 데이터가 저장되어 있다.

When: 학생이 목표 학교 검색에서 "과학고"를 검색한다.

Then: 전국 19개 과학고/영재학교가 검색 결과에 표시된다.

선행: 없음

Scenario WP3.6-4: 학교 유형별 필터링

Given: 다양한 유형의 고등학교 데이터가 존재한다.

When: 학생이 "외국어고" 유형으로 필터링한다.

Then: 22개 외국어고만 검색 결과에 표시된다.

선행: WP3.6-3

Scenario WP3.6-5: 2025학년도 입시 일정 조회

Given: 109개 입시 일정 데이터가 저장되어 있다.

When: 학생이 특정 학교의 입시 일정을 조회한다.

Then: 입학설명회, 원서접수, 서류심사, 시험, 면접, 합격자 발표, 등록 일정이 시간순으로 표시된다.

선행: WP3.2-3

Scenario WP3.6-6: 일정 유형별 필터링

Given: 다양한 유형의 입시 일정이 존재한다.

When: 학부모가 "원서접수" 일정만 필터링한다.

Then: 각 학교의 원서접수 기간만 캘린더에 표시된다.

선행: WP3.6-5

Scenario WP3.6-7: 새로운 지역 중학교 데이터 없음 처리

Given: 특정 지역(예: 제주)의 중학교 데이터가 아직 없다.

When: 사용자가 해당 지역을 선택하고 검색한다.

Then: "해당 지역의 중학교 데이터가 아직 없습니다" 안내 메시지가 표시된다.

선행: 없음

---

🌐 WP3.7 — 실제 크롤링 시스템 구현

Scenario WP3.7-1: 단일 학교 홈페이지 크롤링 성공

Given: 관리자가 크롤링 관리 페이지에 접속했고, 웹사이트 URL이 등록된 학교가 있다.

When: 관리자가 특정 학교를 선택하고 "크롤링 시작" 버튼을 클릭한다.

Then: 해당 학교 홈페이지에서 입시 정보가 수집되고, 결과가 화면에 표시된다.

선행: WP3.5

Scenario WP3.7-2: 입시 페이지 자동 탐색

Given: 크롤러가 학교 메인 페이지에 접속했다.

When: 페이지 내 링크를 분석하여 입시 관련 페이지를 찾는다.

Then: "입학", "입시", "전형", "모집" 등의 키워드가 포함된 링크로 자동 이동한다.

선행: WP3.7-1

Scenario WP3.7-3: 일정 정보 추출 성공

Given: 입시 페이지에 테이블 또는 리스트 형태의 일정 정보가 있다.

When: 크롤러가 날짜 패턴(YYYY.MM.DD, MM/DD 등)을 인식한다.

Then: 일정 유형(설명회, 원서접수, 면접 등)과 함께 날짜가 추출되어 저장된다.

선행: WP3.7-2

Scenario WP3.7-4: 학교 유형별 일괄 크롤링

Given: 관리자가 "과학고" 유형을 선택했다.

When: "유형별 크롤링" 버튼을 클릭한다.

Then: 등록된 모든 과학고의 홈페이지가 순차적으로 크롤링되고, 진행 상황이 표시된다.

선행: WP3.7-1

Scenario WP3.7-5: 다중 학교 선택 크롤링

Given: 관리자가 여러 학교를 체크박스로 선택했다.

When: "선택한 학교 크롤링" 버튼을 클릭한다.

Then: 선택한 학교들이 2초 간격으로 순차 크롤링되고, 서버 부하가 방지된다.

선행: WP3.7-1

Scenario WP3.7-6: 크롤링 결과 요약 표시

Given: 크롤링이 완료되었다.

When: 결과 화면이 표시된다.

Then: 요청 학교 수, 성공 수, 수집된 일정 수가 요약 카드로 표시된다.

선행: WP3.7-4, WP3.7-5

Scenario WP3.7-7: 크롤링 히스토리 조회

Given: 관리자가 크롤링 관리 페이지에 있다.

When: "최근 수집된 일정" 섹션을 확인한다.

Then: 최근 수집된 일정이 학교명, 일정명, 유형, 날짜, 승인 상태와 함께 테이블로 표시된다.

선행: WP3.7-1

Scenario WP3.7-8: 수집 데이터 관리자 승인 필요

Given: 크롤링으로 새로운 일정 데이터가 수집되었다.

When: 데이터가 DB에 저장된다.

Then: publishStatus가 DRAFT로 설정되어 관리자 승인 전까지 사용자에게 노출되지 않는다.

선행: WP3.3-1

Scenario WP3.7-9: 크롤링 실패 시 에러 처리

Given: 특정 학교의 홈페이지가 접속 불가하거나 구조가 변경되었다.

When: 크롤러가 해당 학교를 크롤링 시도한다.

Then: 에러가 로깅되고, 다음 학교로 계속 진행되며, 결과에 실패 항목이 표시된다.

선행: WP3.7-1

Scenario WP3.7-10: 크롤링 가능 학교 목록 조회

Given: 관리자가 크롤링 페이지에 접속했다.

When: 학교 유형을 필터링한다.

Then: 해당 유형 중 웹사이트 URL이 등록된 학교만 목록에 표시된다.

선행: WP3.5